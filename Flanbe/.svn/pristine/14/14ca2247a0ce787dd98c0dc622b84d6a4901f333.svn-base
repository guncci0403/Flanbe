<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<script>
$(function (){
	<c:if test="${msg != null }">
		alert("${msg}");
	</c:if>
	
	$(".userDetail").on("click", function(){
		var user_id = $(this).data("userid");
		$("#user_id").val(user_id);
		console.log(user_id);
	})
})

</script>
<main class="flanbe">

	<!-- <form action=""> -->
	<!--  <input type="text" id="user_id" name="user_id" value=""> -->
	<!-- </form> -->
		<div class="row ">
			<div class="col-12  mt-3">
				<div class="card">
					<div
						class="card-header d-flex justify-content-between align-items-center">
						<h6 class="card-title">
							<strong>[ ${pVo.p_title } ]</strong> 의 지원자 목록
						</h6>
					</div>
		<div class="card-content">
			<!-- 			 <div class="card-body p-0 table-responsive"> -->
			<div class="card-body">
				<div class="table-responsive">
					<table class="table" id="userListTable" style="font-size: 15px;">
						<thead>
							<tr>
								<th scope="col">지원자 사진</th>
								<th scope="col">지원자 이름</th>
								<th scope="col">&nbsp;보유 기술 (숙련도)</th>
								<th scope="col">&nbsp;경력 여부</th>
								<th scope="col">그룹 여부</th>
								<th scope="col">수락/거절</th>
							</tr>
						</thead>
						<tbody id="transactionHistoryTrns">
							<c:forEach items="${userList }" var="user">
								<tr class="userDetail" data-userid="${user.user_id }">
									<th scope="row" style="padding: 20px;">
									<img src="${cp }/user/profileImg?user_id=${user.user_id }" alt="${user.user_nm }" class="user-image img-fluid">
										&nbsp;&nbsp;</th>
									<td style="font-size: 18px;">${user.user_nm }</td>

									<c:choose>
										<c:when test="${user.us_kind!= null }">
											<td style="font-size: 18px;">${user.us_kind }</td>
										</c:when>
										<c:otherwise>
											<td style="font-size: 18px;">x</td>
										</c:otherwise>
									</c:choose>

									<c:choose>
										<c:when test="${user.careers != null }">
											<td style="font-size: 18px;">경력 (${user.careers }년)</td>
										</c:when>
										<c:otherwise>
											<td style="font-size: 18px;">신입</td>
										</c:otherwise>
									</c:choose>

									<c:choose>
										<c:when test="${user.u_div eq 'S'}">
											<td style="font-size: 18px;">&nbsp;X</td>
										</c:when>
										<c:when test="${user.u_div eq 'T'}">
											<td style="font-size: 18px;">&nbsp;${user.group_nm }</td>
										</c:when>
									</c:choose>

									<c:choose>
										<c:when test="${user.p_state eq '06' }">
											<td style="font-size: 15px; color: blue;">수락 요청중&nbsp;&nbsp;
											<i class="icon-user-following icons" style="width: 50px; color: blue;"></i>
											</td>
										</c:when>
										<c:otherwise>
											<td style="font-size: 20px;">
											<a class="text-success edit-contact"title="수락 요청"
												href="${cp }/project/projectOk?user_id=${user.user_id}&p_code=${p_code}&user_nm=${user.user_nm}&client=${S_USER.user_id}">
												<i class="ion-checkmark-circled"> </i></a> 
											<a class="text-danger delete-contact" title="거절 요청"
												href="${cp }/project/projectNo?user_id=${user.user_id}&p_code=${p_code}&user_nm=${user.user_nm}&client=${S_USER.user_id}">
												<i class="ion-close-circled"> </i></a></td>
										</c:otherwise>
									</c:choose>
								</tr>
							</c:forEach>
						</tbody>
					</table>
				</div>
			</div>
		</div>
					</div>
	</div>
	</div>
	<div class="card-body">
		<nav aria-label="member list Navigation">
			<ul class="pagination justify-content-center m-0">
				<c:set var="cnt" value="${pagination}" />
				<li class="page-item"><a class="page-link"
					href="${cp }/project/viewPattendUser?p_code=${p_code }&page=1&pageSize=${pageVo.pageSize}"><i
						class="fas fa-angle-double-left"></i></a></li>
				<li class="page-item"><a class="page-link"
					href="${cp }/project/viewPattendUser?p_code=${p_code }&page=
											<c:choose>
											<c:when test="${pageVo.getPage() > 0 }">${pageVo.page}</c:when>
											</c:choose>&pageSize=${pageVo.pageSize}"><i
						class="fas fa-angle-left"></i></a></li>
				<c:forEach begin="1" end="${pagination}" var="i">
					<c:choose>
						<c:when test="${pageVo.page == i}">
							<li class="page-item active"><a class="page-link"
								href="${cp}/project/viewPattendUser?p_code=${p_code }&page=${i}&pageSize=${pageVo.pageSize}">${i}</a></li>
						</c:when>
						<c:otherwise>
							<li class="page-item"><a class="page-link"
								href="${cp}/project/viewPattendUser?p_code=${p_code }&page=${i}&pageSize=${pageVo.pageSize}">${i}</a></li>
						</c:otherwise>
					</c:choose>
				</c:forEach>
				<li class="page-item"><a class="page-link"
					href="${cp}/project/viewPattendUser?p_code=${p_code }&page=<c:choose>
									<c:when test="${pageVo.getPage() + 1 > pagination }">${pagination }</c:when>
									<c:otherwise>${pageVo.getPage() + 1}</c:otherwise>
								</c:choose>&pageSize=${pageVo.pageSize }"><i
						class="fas fa-angle-right"></i></a></li>
				<li class="page-item"><a class="page-link"
					href="${cp}/project/viewPattendUser?p_code=${p_code }&page=${pagination}&pageSize=${pageVo.pageSize}"><i
						class="fas fa-angle-double-right"></i></a></li>
			</ul>
		</nav>
	</div>
	<!-- END: Card DATA-->
</main>
<!-- END: Content-->
